<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EdgeBet AI - Smart Betting Platform</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#22d3ee">
  <style>
    :root {
      --accent: #22d3ee;
      --accent2: #a78bfa;
      --success: #4ade80;
      --danger: #ef4444;
      --warning: #fb923c;
      --gold: #fbbf24;
      --bg: #09090b;
      --card: rgba(255,255,255,0.03);
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      background: var(--bg);
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100vh;
    }
    
    .app { max-width: 480px; margin: 0 auto; min-height: 100vh; position: relative; }
    
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    
    /* Auth Screens */
    .auth-screen {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 24px;
      animation: fadeIn 0.5s ease;
    }
    
    .auth-logo {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .auth-logo-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      font-size: 40px;
      box-shadow: 0 20px 40px rgba(34,211,238,0.3);
    }
    
    .auth-logo h1 {
      font-size: 28px;
      font-weight: 900;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .auth-logo p {
      color: #6b7280;
      margin-top: 8px;
    }
    
    .input-group { margin-bottom: 20px; }
    .input-group label { display: block; font-size: 13px; color: #9ca3af; margin-bottom: 8px; }
    .input {
      width: 100%;
      padding: 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      transition: all 0.2s;
    }
    .input:focus { border-color: var(--accent); outline: none; box-shadow: 0 0 0 3px rgba(34,211,238,0.1); }
    
    .btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(34,211,238,0.3); }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .btn-secondary { background: rgba(255,255,255,0.1); }
    .btn-gold { background: linear-gradient(135deg, var(--gold), #f59e0b); }
    .btn-google { 
      background: #fff; 
      color: #333; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      border: 1px solid rgba(0,0,0,0.1);
    }
    .btn-google:hover { background: #f5f5f5; }
    .btn-facebook { 
      background: #1877f2; 
      color: #fff;
      display: flex; 
      align-items: center; 
      justify-content: center;
    }
    .btn-facebook:hover { background: #166fe5; }
    
    .divider {
      display: flex;
      align-items: center;
      margin: 24px 0;
      color: #6b7280;
      font-size: 14px;
    }
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: rgba(255,255,255,0.1);
    }
    .divider span {
      padding: 0 16px;
    }
    
    .auth-switch {
      text-align: center;
      margin-top: 24px;
      color: #6b7280;
      font-size: 14px;
    }
    .auth-switch a { color: var(--accent); cursor: pointer; }
    
    /* Onboarding */
    .onboarding {
      min-height: 100vh;
      padding: 24px;
      display: flex;
      flex-direction: column;
      animation: slideUp 0.5s ease;
    }
    
    .onboarding-step { display: none; }
    .onboarding-step.active { display: block; }
    
    .onboarding h2 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .onboarding p {
      color: #9ca3af;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 32px;
    }
    
    .sport-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 32px;
    }
    
    .sport-option {
      padding: 20px;
      background: rgba(255,255,255,0.03);
      border: 2px solid transparent;
      border-radius: 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    .sport-option:hover { border-color: rgba(34,211,238,0.3); }
    .sport-option.selected {
      border-color: var(--accent);
      background: rgba(34,211,238,0.05);
    }
    .sport-option .emoji { font-size: 32px; margin-bottom: 8px; }
    .sport-option .name { font-size: 14px; font-weight: 600; }
    
    .experience-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 32px;
    }
    
    .exp-option {
      padding: 20px;
      background: rgba(255,255,255,0.03);
      border: 2px solid transparent;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .exp-option:hover { border-color: rgba(34,211,238,0.3); }
    .exp-option.selected {
      border-color: var(--accent);
      background: rgba(34,211,238,0.05);
    }
    .exp-option .label { font-size: 16px; font-weight: 700; margin-bottom: 4px; }
    .exp-option .desc { font-size: 13px; color: #6b7280; }
    
    .progress-bar {
      height: 4px;
      background: rgba(255,255,255,0.1);
      border-radius: 99px;
      margin-bottom: 32px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius: 99px;
      transition: width 0.3s ease;
    }
    
    /* Paywall / Upgrade */
    .paywall {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.95);
      backdrop-filter: blur(20px);
      z-index: 1000;
      display: none;
      flex-direction: column;
      padding: 24px;
      overflow-y: auto;
    }
    .paywall.active { display: flex; animation: fadeIn 0.3s ease; }
    
    .paywall-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: #6b7280;
      font-size: 24px;
      cursor: pointer;
    }
    
    .paywall h2 {
      text-align: center;
      font-size: 24px;
      font-weight: 800;
      margin: 40px 0 8px;
    }
    
    .paywall-subtitle {
      text-align: center;
      color: #9ca3af;
      margin-bottom: 32px;
    }
    
    .tier-cards {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 24px;
    }
    
    .tier-card {
      background: rgba(255,255,255,0.03);
      border: 2px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      padding: 24px;
      position: relative;
      transition: all 0.2s;
    }
    .tier-card:hover { border-color: rgba(255,255,255,0.15); }
    .tier-card.popular {
      border-color: var(--accent);
      background: linear-gradient(135deg, rgba(34,211,238,0.05), rgba(167,139,250,0.05));
    }
    
    .tier-badge {
      position: absolute;
      top: -10px;
      right: 20px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      padding: 4px 12px;
      border-radius: 99px;
      font-size: 11px;
      font-weight: 700;
    }
    
    .tier-name {
      font-size: 20px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    .tier-price {
      font-size: 32px;
      font-weight: 900;
      margin-bottom: 4px;
    }
    .tier-price span {
      font-size: 14px;
      color: #6b7280;
      font-weight: 400;
    }
    .tier-trial {
      font-size: 13px;
      color: var(--success);
      margin-bottom: 16px;
    }
    
    .tier-features {
      list-style: none;
      margin-bottom: 20px;
    }
    .tier-features li {
      padding: 8px 0;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .tier-features li::before {
      content: '‚úì';
      color: var(--success);
      font-weight: 700;
    }
    
    /* Main App */
    .header {
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .header-logo {
      font-size: 20px;
      font-weight: 800;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .header-tier {
      padding: 6px 12px;
      background: rgba(34,211,238,0.1);
      border: 1px solid rgba(34,211,238,0.3);
      border-radius: 99px;
      font-size: 11px;
      font-weight: 700;
      color: var(--accent);
      cursor: pointer;
    }
    .header-tier.pro { background: rgba(34,211,238,0.15); color: var(--accent); }
    .header-tier.sharp { background: rgba(251,191,36,0.15); color: var(--gold); border-color: var(--gold); }
    
    .content { padding: 20px; display: none; }
    .content.active { display: block; animation: slideUp 0.3s ease; }
    
    .page-title { font-size: 28px; font-weight: 800; margin-bottom: 20px; }
    
    .picks-remaining {
      background: linear-gradient(135deg, rgba(34,211,238,0.1), rgba(167,139,250,0.1));
      border: 1px solid rgba(34,211,238,0.2);
      border-radius: 16px;
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .picks-remaining-text { font-size: 14px; color: #9ca3af; }
    .picks-remaining-count { font-size: 24px; font-weight: 900; color: var(--accent); }
    
    .pick-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 12px;
      animation: slideUp 0.4s ease;
    }
    .pick-card.locked {
      opacity: 0.5;
      position: relative;
    }
    .pick-card.locked::after {
      content: 'üîí';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 32px;
    }
    
    /* Bottom Nav */
    .nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(9,9,11,0.98);
      backdrop-filter: blur(20px);
      border-top: 1px solid rgba(255,255,255,0.08);
      display: flex;
      justify-content: space-around;
      padding: 12px 0 28px;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      background: none;
      border: none;
      color: #6b7280;
      font-size: 10px;
      cursor: pointer;
      padding: 8px 16px;
    }
    .nav-item.active { color: var(--accent); }
    .nav-item svg { width: 24px; height: 24px; }
    
    /* Referral Banner */
    .referral-banner {
      background: linear-gradient(135deg, rgba(251,191,36,0.1), rgba(251,146,60,0.1));
      border: 1px solid rgba(251,191,36,0.3);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .referral-text { font-size: 14px; }
    .referral-text strong { color: var(--gold); display: block; }
    .referral-btn {
      padding: 8px 16px;
      background: var(--gold);
      color: #000;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0,0,0,0.95);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 16px 24px;
      color: #fff;
      font-size: 14px;
      z-index: 2000;
      opacity: 0;
      transition: all 0.3s ease;
    }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
  </style>
</head>
<body>
  <div class="app">
    
    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="auth-screen">
      <div class="auth-logo">
        <div class="auth-logo-icon">‚ö°</div>
        <h1>EdgeBet AI</h1>
        <p>Algorithmic sports betting</p>
      </div>
      
      <!-- Social Login -->
      <button class="btn btn-google" onclick="loginWithGoogle()">
        <svg style="width: 20px; height: 20px; margin-right: 12px; vertical-align: middle;" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
        Continue with Google
      </button>
      
      <button class="btn btn-facebook" onclick="loginWithFacebook()" style="margin-top: 12px;">
        <svg style="width: 20px; height: 20px; margin-right: 12px; vertical-align: middle;" viewBox="0 0 24 24"><path fill="currentColor" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
        Continue with Facebook
      </button>
      
      <div class="divider">
        <span>or</span>
      </div>
      
      <div class="input-group">
        <label>Email</label>
        <input type="email" class="input" id="login-email" placeholder="you@example.com">
      </div>
      
      <div class="input-group">
        <label>Password</label>
        <input type="password" class="input" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      </div>
      
      <button class="btn" onclick="login()">Sign In with Email</button>
      <button class="btn btn-secondary" onclick="showRegister()" style="margin-top: 12px;">Create Account</button>
      
      <div class="auth-switch">
        New to EdgeBet? <a onclick="showRegister()">Get started</a>
      </div>
    </div>
    
    <!-- REGISTER SCREEN -->
    <div id="register-screen" class="auth-screen" style="display: none;">
      <div class="auth-logo">
        <div class="auth-logo-icon">‚ö°</div>
        <h1>Create Account</h1>
        <p>Start your 7-day free trial</p>
      </div>
      
      <!-- Social Register -->
      <button class="btn btn-google" onclick="loginWithGoogle()">
        <svg style="width: 20px; height: 20px; margin-right: 12px; vertical-align: middle;" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
        Continue with Google
      </button>
      
      <button class="btn btn-facebook" onclick="loginWithFacebook()" style="margin-top: 12px;">
        <svg style="width: 20px; height: 20px; margin-right: 12px; vertical-align: middle;" viewBox="0 0 24 24"><path fill="currentColor" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
        Continue with Facebook
      </button>
      
      <div class="divider">
        <span>or</span>
      </div>
      
      <div class="input-group">
        <label>Email</label>
        <input type="email" class="input" id="register-email" placeholder="you@example.com">
      </div>
      
      <div class="input-group">
        <label>Password</label>
        <input type="password" class="input" id="register-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      </div>
      
      <button class="btn" onclick="register()">Start Free Trial with Email</button>
      
      <div class="auth-switch">
        Already have an account? <a onclick="showLogin()">Sign in</a>
      </div>
    </div>
    
    <!-- ONBOARDING -->
    <div id="onboarding" class="onboarding" style="display: none;">
      
      <!-- Step 1 -->
      <div class="onboarding-step active" data-step="1">
        <div class="progress-bar"><div class="progress-fill" style="width: 33%"></div></div>
        <h2>Which sports do you bet on?</h2>
        <p>Select all that apply. We'll prioritize these in your picks.</p>
        
        <div class="sport-grid">
          <div class="sport-option" onclick="toggleSport(this, 'nba')">
            <div class="emoji">üèÄ</div>
            <div class="name">NBA</div>
          </div>
          <div class="sport-option" onclick="toggleSport(this, 'nfl')">
            <div class="emoji">üèà</div>
            <div class="name">NFL</div>
          </div>
          <div class="sport-option" onclick="toggleSport(this, 'nhl')">
            <div class="emoji">üèí</div>
            <div class="name">NHL</div>
          </div>
          <div class="sport-option" onclick="toggleSport(this, 'mlb')">
            <div class="emoji">‚öæ</div>
            <div class="name">MLB</div>
          </div>
        </div>
        
        <button class="btn" onclick="nextStep()">Continue</button>
      </div>
      
      <!-- Step 2 -->
      <div class="onboarding-step" data-step="2">
        <div class="progress-bar"><div class="progress-fill" style="width: 66%"></div></div>
        <h2>How experienced are you?</h2>
        <p>This helps us tailor the tools we show you.</p>
        
        <div class="experience-options">
          <div class="exp-option" onclick="selectExperience(this, 'beginner')">
            <div class="label">Beginner</div>
            <div class="desc">New to sports betting. I need guidance.</div>
          </div>
          <div class="exp-option" onclick="selectExperience(this, 'intermediate')">
            <div class="label">Intermediate</div>
            <div class="desc">I understand odds and basic strategy.</div>
          </div>
          <div class="exp-option" onclick="selectExperience(this, 'advanced')">
            <div class="label">Advanced</div>
            <div class="desc">I'm familiar with EV, Kelly, and sharp money.</div>
          </div>
        </div>
        
        <button class="btn" onclick="nextStep()">Continue</button>
      </div>
      
      <!-- Step 3 -->
      <div class="onboarding-step" data-step="3">
        <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
        <h2>You're all set!</h2>
        <p>Here's what you get with your free trial:</p>
        
        <div style="background: rgba(255,255,255,0.03); border-radius: 16px; padding: 24px; margin-bottom: 32px;">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent), var(--accent2)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">‚úì</div>
            <div>
              <div style="font-weight: 700;">Pro Plan</div>
              <div style="font-size: 13px; color: #6b7280;">7 days free, then $19.99/mo</div>
            </div>
          </div>
          <ul style="list-style: none; font-size: 14px; color: #9ca3af;">
            <li style="padding: 6px 0;">‚úì Unlimited AI picks</li>
            <li style="padding: 6px 0;">‚úì Parlay builder</li>
            <li style="padding: 6px 0;">‚úì Steam move alerts</li>
            <li style="padding: 6px 0;">‚úì Line shopping</li>
          </ul>
        </div>
        
        <button class="btn" onclick="completeOnboarding()">Start Using EdgeBet</button>
        <button class="btn btn-secondary" onclick="showPaywall()" style="margin-top: 12px;">View All Plans</button>
      </div>
    </div>
    
    <!-- PAYWALL -->
    <div id="paywall" class="paywall">
      <button class="paywall-close" onclick="hidePaywall()">√ó</button>
      <h2>Choose Your Plan</h2>
      <p class="paywall-subtitle">Start with a 7-day free trial</p>
      
      <div class="tier-cards">
        <div class="tier-card">
          <div class="tier-name">Free</div>
          <div class="tier-price">$0<span>/mo</span></div>
          <ul class="tier-features">
            <li>2 AI picks per day</li>
            <li>EV calculator</li>
            <li>Betting journal</li>
          </ul>
          <button class="btn btn-secondary" onclick="selectTier('FREE')">Continue Free</button>
        </div>
        
        <div class="tier-card popular">
          <div class="tier-badge">POPULAR</div>
          <div class="tier-name">Pro</div>
          <div class="tier-price">$19.99<span>/mo</span></div>
          <div class="tier-trial">7 days free</div>
          <ul class="tier-features">
            <li>Unlimited AI picks</li>
            <li>Parlay builder</li>
            <li>Steam move alerts</li>
            <li>Line shopping tool</li>
            <li>Analytics dashboard</li>
          </ul>
          <button class="btn" onclick="startTrial('PRO')">Start Free Trial</button>
        </div>
        
        <div class="tier-card">
          <div class="tier-name">Sharp</div>
          <div class="tier-price">$49.99<span>/mo</span></div>
          <div class="tier-trial">7 days free</div>
          <ul class="tier-features">
            <li>Everything in Pro</li>
            <li>Arbitrage alerts</li>
            <li>Weather analysis</li>
            <li>Discord community</li>
            <li>Priority support</li>
          </ul>
          <button class="btn btn-gold" onclick="startTrial('SHARP')">Start Free Trial</button>
        </div>
      </div>
      
      <p style="text-align: center; color: #6b7280; font-size: 13px;">
        Cancel anytime. No commitment.
      </p>
    </div>
    
    <!-- MAIN APP -->
    <div id="main-app" style="display: none;">
      <div class="header">
        <div class="header-logo">EdgeBet AI</div>
        <div class="header-tier" id="user-tier" onclick="showPaywall()">FREE</div>
      </div>
      
      <!-- HOME -->
      <div id="home-content" class="content active">
        <div class="referral-banner">
          <div class="referral-text">
            <strong>Give $10, Get $10</strong>
            Refer friends to EdgeBet
          </div>
          <button class="referral-btn" onclick="copyReferral()">Share</button>
        </div>
        
        <div class="picks-remaining">
          <div class="picks-remaining-text">Free picks remaining today</div>
          <div class="picks-remaining-count" id="picks-count">2</div>
        </div>
        
        <button class="btn" onclick="scanPicks()" id="scan-btn">‚ö° Scan for Picks</button>
        
        <div id="picks-list"></div>
      </div>
      
      <!-- NAV -->
      <div class="nav">
        <button class="nav-item active" onclick="showTab('home')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
          <span>Home</span>
        </button>
        <button class="nav-item" onclick="showTab('picks')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
          <span>Picks</span>
        </button>
        <button class="nav-item" onclick="showTab('tools')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
          <span>Tools</span>
        </button>
        <button class="nav-item" onclick="showTab('account')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          <span>Account</span>
        </button>
      </div>
    </div>
    
  </div>
  
  <div class="toast" id="toast"></div>

  <script>
    const BACKEND = 'https://edgebet-backend-1.onrender.com';
    let currentUser = null;
    let onboardingData = { sports: [], experience: '' };
    
    // Auth
    function showRegister() {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('register-screen').style.display = 'flex';
    }
    
    function showLogin() {
      document.getElementById('register-screen').style.display = 'none';
      document.getElementById('login-screen').style.display = 'flex';
    }
    
    // OAuth Login
    async function loginWithGoogle() {
      try {
        const res = await fetch(`${BACKEND}/auth/google/url`);
        const data = await res.json();
        if (data.url) {
          window.location.href = data.url;
        } else {
          showToast('Google login not available');
        }
      } catch (e) {
        showToast('Failed to start Google login');
      }
    }
    
    async function loginWithFacebook() {
      try {
        const res = await fetch(`${BACKEND}/auth/facebook/url`);
        const data = await res.json();
        if (data.url) {
          window.location.href = data.url;
        } else {
          showToast('Facebook login not available');
        }
      } catch (e) {
        showToast('Failed to start Facebook login');
      }
    }
    
    // Handle OAuth callback
    function handleOAuthCallback() {
      const urlParams = new URLSearchParams(window.location.search);
      const auth = urlParams.get('auth');
      const token = urlParams.get('token');
      const email = urlParams.get('email');
      const onboarding = urlParams.get('onboarding') === 'true';
      const error = urlParams.get('error');
      const message = urlParams.get('message');
      
      if (error) {
        showToast(decodeURIComponent(message || 'Login failed'));
        return;
      }
      
      if (auth === 'success' && token) {
        localStorage.setItem('token', token);
        currentUser = { email: decodeURIComponent(email) };
        
        // Clear URL params
        window.history.replaceState({}, document.title, window.location.pathname);
        
        if (onboarding) {
          document.getElementById('login-screen').style.display = 'none';
          document.getElementById('register-screen').style.display = 'none';
          document.getElementById('onboarding').style.display = 'flex';
        } else {
          showMainApp();
        }
      }
    }
    
    async function register() {
      const email = document.getElementById('register-email').value;
      const password = document.getElementById('register-password').value;
      
      if (!email || !password) {
        showToast('Please fill in all fields');
        return;
      }
      
      try {
        const res = await fetch(`${BACKEND}/auth/register`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        
        const data = await res.json();
        if (data.error) {
          showToast(data.error);
          return;
        }
        
        currentUser = data;
        localStorage.setItem('token', data.token);
        
        document.getElementById('register-screen').style.display = 'none';
        document.getElementById('onboarding').style.display = 'flex';
      } catch (e) {
        showToast('Registration failed');
      }
    }
    
    async function login() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      try {
        const res = await fetch(`${BACKEND}/auth/login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        
        const data = await res.json();
        if (data.error) {
          showToast(data.error);
          return;
        }
        
        currentUser = data;
        localStorage.setItem('token', data.token);
        
        if (!data.onboardingCompleted) {
          document.getElementById('login-screen').style.display = 'none';
          document.getElementById('onboarding').style.display = 'flex';
        } else {
          showMainApp();
        }
      } catch (e) {
        showToast('Login failed');
      }
    }
    
    // Onboarding
    function toggleSport(el, sport) {
      el.classList.toggle('selected');
      if (el.classList.contains('selected')) {
        onboardingData.sports.push(sport);
      } else {
        onboardingData.sports = onboardingData.sports.filter(s => s !== sport);
      }
    }
    
    function selectExperience(el, level) {
      document.querySelectorAll('.exp-option').forEach(o => o.classList.remove('selected'));
      el.classList.add('selected');
      onboardingData.experience = level;
    }
    
    function nextStep() {
      const current = document.querySelector('.onboarding-step.active');
      const next = current.nextElementSibling;
      if (next && next.classList.contains('onboarding-step')) {
        current.classList.remove('active');
        next.classList.add('active');
      }
    }
    
    async function completeOnboarding() {
      try {
        await fetch(`${BACKEND}/onboarding/complete`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`
          },
          body: JSON.stringify(onboardingData)
        });
        
        document.getElementById('onboarding').style.display = 'none';
        showMainApp();
      } catch (e) {
        showMainApp(); // Show anyway
      }
    }
    
    // Paywall
    function showPaywall() {
      document.getElementById('paywall').classList.add('active');
    }
    
    function hidePaywall() {
      document.getElementById('paywall').classList.remove('active');
    }
    
    async function startTrial(tier) {
      try {
        const res = await fetch(`${BACKEND}/stripe/checkout`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`
          },
          body: JSON.stringify({ tier })
        });
        
        const data = await res.json();
        if (data.url) {
          window.location.href = data.url;
        }
      } catch (e) {
        showToast('Checkout failed');
      }
    }
    
    function selectTier(tier) {
      hidePaywall();
      if (tier === 'FREE') {
        showMainApp();
      }
    }
    
    // Main App
    function showMainApp() {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('register-screen').style.display = 'none';
      document.getElementById('onboarding').style.display = 'none';
      document.getElementById('paywall').style.display = 'none';
      document.getElementById('main-app').style.display = 'block';
      
      loadUserTier();
    }
    
    async function loadUserTier() {
      try {
        const res = await fetch(`${BACKEND}/tier/status`, {
          headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
        });
        const data = await res.json();
        
        document.getElementById('user-tier').textContent = data.tier;
        document.getElementById('user-tier').className = `header-tier ${data.tier.toLowerCase()}`;
        document.getElementById('picks-count').textContent = data.picksRemaining;
      } catch (e) {}
    }
    
    async function scanPicks() {
      const btn = document.getElementById('scan-btn');
      btn.disabled = true;
      btn.textContent = 'Scanning...';
      
      try {
        const res = await fetch(`${BACKEND}/scan`, {
          headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
        });
        
        const data = await res.json();
        
        if (data.error === 'Daily pick limit reached') {
          showPaywall();
          btn.disabled = false;
          btn.textContent = '‚ö° Scan for Picks';
          return;
        }
        
        const container = document.getElementById('picks-list');
        container.innerHTML = data.picks?.map(p => `
          <div class="pick-card">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="color: #9ca3af; font-size: 13px;">AI Pick</span>
              <span style="color: var(--accent); font-weight: 700;">+${p.edge}% EDGE</span>
            </div>
            <div style="font-size: 20px; font-weight: 800; margin-bottom: 4px;">${p.bet}</div>
            <div style="font-family: monospace; font-size: 18px; color: var(--success);">${p.odds}</div>
            <div style="margin-top: 12px; font-size: 13px; color: #6b7280;">${p.confidence}% confidence</div>
          </div>
        `).join('') || '<p style="text-align: center; color: #6b7280;">No picks available</p>';
        
        document.getElementById('picks-count').textContent = data.remainingPicks || 0;
      } catch (e) {
        showToast('Scan failed');
      }
      
      btn.disabled = false;
      btn.textContent = '‚ö° Scan Again';
    }
    
    function showTab(tab) {
      document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      event.currentTarget.classList.add('active');
      
      // In real app, would show different content
    }
    
    function copyReferral() {
      navigator.clipboard.writeText('https://edgebet.ai/?ref=MYCODE');
      showToast('Referral link copied!');
    }
    
    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 3000);
    }
    
    // Handle OAuth callback on page load
    handleOAuthCallback();
    
    // Check for existing session (if not handled by OAuth)
    const token = localStorage.getItem('token');
    if (token && !currentUser) {
      showMainApp();
    }
  </script>
</body>
</html>
<!-- Deployed Sat Feb 28 15:17:54 EST 2026 -->
